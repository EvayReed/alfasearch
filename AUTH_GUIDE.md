# AlfaSearch 登录模块使用指南

## 功能概述

AlfaSearch 现在已经集成了完整的用户认证系统，包括：

- ✅ 用户登录
- ✅ 用户注册  
- ✅ 自动认证状态管理
- ✅ 本地存储支持
- ✅ 登出功能
- ✅ 认证守卫（自动重定向）

## 测试账户

为了方便测试，系统预设了一个测试账户：

- **邮箱**: `admin@example.com`
- **密码**: `123456`

## 使用流程

### 1. 首次使用
- 应用启动时会自动检查登录状态
- 如果未登录，会自动跳转到登录页面

### 2. 登录
- 在登录页面输入邮箱和密码
- 点击"登录"按钮
- 登录成功后会自动跳转到主页

### 3. 注册
- 在登录页面点击"立即注册"
- 填写姓名、邮箱、密码和确认密码
- 点击"注册"按钮
- 注册成功后会自动登录并跳转到主页

### 4. 登出
- 在主页右上角点击登出图标
- 确认登出后会返回到登录页面

## 技术实现

### 核心文件结构
```
├── types/auth.ts                    # 认证相关类型定义
├── contexts/AuthContext.tsx         # 认证上下文和状态管理
├── components/auth/
│   ├── AuthGuard.tsx               # 认证守卫组件
│   ├── AuthInput.tsx               # 认证输入组件
│   └── AuthButton.tsx              # 认证按钮组件
├── app/auth/
│   ├── login.tsx                   # 登录页面
│   └── register.tsx                # 注册页面
└── app/_layout.tsx                 # 根布局（集成认证）
```

### 主要特性

1. **状态管理**: 使用 React Context + useReducer 进行状态管理
2. **本地存储**: 使用 AsyncStorage 持久化认证状态
3. **自动重定向**: AuthGuard 组件自动处理登录状态重定向
4. **表单验证**: 完整的前端表单验证
5. **响应式设计**: 支持深色/浅色主题
6. **错误处理**: 完善的错误提示和处理

### 自定义配置

如果需要连接真实的后端API，请修改 `contexts/AuthContext.tsx` 中的以下函数：

- `mockLogin()` - 替换为真实的登录API调用
- `mockRegister()` - 替换为真实的注册API调用

## 开发说明

### 添加新的认证功能

1. 在 `types/auth.ts` 中添加新的类型定义
2. 在 `AuthContext.tsx` 中添加新的方法
3. 在相应的组件中使用 `useAuth()` hook

### 自定义样式

所有认证相关组件都支持主题切换，可以通过修改 `constants/Colors.ts` 来自定义颜色主题。

## 安全注意事项

⚠️ **重要**: 当前实现仅用于演示目的，在生产环境中请确保：

1. 使用 HTTPS 连接
2. 实现真实的后端认证
3. 使用安全的 token 存储方案
4. 添加适当的输入验证和防护措施
5. 实现密码强度检查
6. 添加账户锁定机制

## 故障排除

### 常见问题

1. **登录后仍然显示登录页面**
   - 检查 AsyncStorage 权限
   - 清除应用数据重试

2. **页面跳转异常**
   - 检查 expo-router 配置
   - 确认路由文件命名正确

3. **样式显示异常**
   - 检查主题配置
   - 确认所有依赖已正确安装

如有其他问题，请检查控制台错误信息。
